# Generated by using Rcpp::compileAttributes() -> do not edit by hand
# Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393

#' transform the dbmart data frame to c++ structure
#' Function to create all transitive sequences
#' an store in binary format them to files.
#' 
#' @returns dbMart as c++ struct
#' @param  df_dbMart The dataframe that stores the numeric data mart.
NULL

#' summarize
NULL

#' Get Sequences With Specific Start Phenx
NULL

#' Sequences and summarizes all sequences in a dbmart
NULL

#' create all transitive Sequences
#' 
#' Function to create all transitive sequences
#' an store in binary format them to files.
#' 
#' @returns the overall number of sequences stored.
#' @param  df_dbMart The dataframe that stores the numeric data mart.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param numOfThreads The number of threads that should be used during sequencing.
createTransitiveSequences <- function(df_dbMart, outputDir, outputFilePrefix, numOfThreads = 1L) {
    .Call(`_tSPMPlus_createTransitiveSequences`, df_dbMart, outputDir, outputFilePrefix, numOfThreads)
}

#' tSPMPlus
#'
#' Function to call the tSPM+ workflow, most of the other function provide by this package are wrapper functions
#' that calls this functions with predefined parameters.
#' 
#' @returns The sequences as data frame.
#' @param  df_dbMart The data frame that stores the data mart.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param numOfThreads The number of threads that should be used during sequencing.
#' @param storeSeqDuringCreation  Boolean parameter to control if the duration should be included in the sequence ID during creation, DEFAULT = FALSE.
#' @param removeSparseSequences  Boolean parameter to control if the sparsity should be applied
#' @param sparsityValue          The numeric value for the sparsity. DEFAULT = 0.05.
#' @param createTemporalBuckets  Boolean flag if the the the sequences should be split up in dynamic buckets. Number of buckets min(4, max_duration(sequence)).
#' @param removeSparseTemporalBuckets Boolean, to control if the sparsity should be applied on the dynamic temporal buckets.
#' @param durationSparsity  Boolean flag to control if sparse sequences should be removed considering the duration periods of a sequence.
#' @param durationSparsityValue Numeric value.
#' @param patIdLength describes the number of digits that are used for the patient number.
#' @param returnDuration Boolean, controls if the data frame that is returns contains. 
#' @param durationPeriods Numeric, Upper threshold, stores the number of day in the time period, e.g. 30.471 for months, 364.25 for years. 
#' @param daysForCoOoccurence Integer, sets the upper threshold for the sequence duration so that they are counted as co-occurrence (meaning a duration of 0).
tSPMPlus <- function(df_dbMart, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", numOfThreads = 1L, removeSparseSequences = TRUE, sparsityValue = 0.05, createTemporalBuckets = FALSE, durationSparsity = FALSE, durationSparsityValue = 0, removeSparseTemporalBuckets = FALSE, patIdLength = 7L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L) {
    .Call(`_tSPMPlus_tSPMPlus`, df_dbMart, storeSeqDuringCreation, outputDir, outputFilePrefix, numOfThreads, removeSparseSequences, sparsityValue, createTemporalBuckets, durationSparsity, durationSparsityValue, removeSparseTemporalBuckets, patIdLength, returnDuration, durationPeriods, daysForCoOoccurence)
}

#' extract Non Sparse Sequences
#'
#' Extracts all non sparse transitive sequences from the data mart, after converting it to numeric.
#'
#' @returns The sequences as data frame.
#' @param df_dbMart The data frame that stores the data mart.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param numOfThreads The number of threads that should be used during sequencing.
#' @param storeSeqDuringCreation  Boolean parameter to control if the duration should be included in the sequence ID during creation, DEFAULT = FALSE.
#' @param sparsityValue          The numeric value for the sparsity. DEFAULT = 0.05.
#' @param returnDuration Boolean, controls if the data frame that is returns contains.
#' @param durationPeriods Numeric, Upper threshold, stores the number of day in the time period, eg. 30.471 for months, 364.25 for years. 
#' @param daysForCoOoccurence Integer, sets the upper threshold for the sequence duration so that they are counted as co-occurrence (meaning a duration of 0).
extractNonSparseSequences <- function(df_dbMart, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", sparsityValue = 0.05, numOfThreads = 1L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L) {
    .Call(`_tSPMPlus_extractNonSparseSequences`, df_dbMart, storeSeqDuringCreation, outputDir, outputFilePrefix, sparsityValue, numOfThreads, returnDuration, durationPeriods, daysForCoOoccurence)
}

#' Extract All Transivite Sequences
#' 
#' Function to extract all transitive sequences.
#' 
#' @returns The sequences as data frame.
#' @param  df_dbMart The data frame that stores the data mart.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param numOfThreads The number of threads that should be used during sequencing.
#' @param storeSeqDuringCreation  Boolean parameter to control if the duration should be included in the sequence ID during creation, DEFAULT = FALSE.
#' @param returnDuration Boolean, controls if the data frame that is returns contains.
#' @param durationPeriods Numeric, Upper threshold, stores the number of day in the time period, e.g. 30.471 for months, 364.25 for years. 
#' @param daysForCoOoccurence Integer, sets the upper threshold for the sequence duration so that they are counted as co-occurrence (meaning a duration of 0).
extractAllTransiviteSequences <- function(df_dbMart, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", numOfThreads = 1L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L) {
    .Call(`_tSPMPlus_extractAllTransiviteSequences`, df_dbMart, storeSeqDuringCreation, outputDir, outputFilePrefix, numOfThreads, returnDuration, durationPeriods, daysForCoOoccurence)
}

#' Get Sequences With Specific End Phenx
#' 
#' Function to extract all transitive sequences that end with given endPhenxs.
#' 
#' @returns The sequences as data frame.
#' @param df_dbMart The data frame that stores the data mart.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param endPhenx IntegerVector, contains the phenx that sequences should end with.
#' @param numOfThreads The number of threads that should be used during sequencing.
#' @param storeSeqDuringCreation  Boolean parameter to control if the duration should be included in the sequence ID during creation, DEFAULT = FALSE.
#' @param returnDuration Boolean, controls if the data frame that is returns contains. 
#' @param durationPeriods Numeric, Upper threshold, stores the number of day in the time period, e.g. 30.471 for months, 364.25 for years. 
#' @param daysForCoOoccurence Integer, sets the upper threshold for the sequence duration so that they are counted as co-occurrence (meaning a duration of 0).
#' @param minDuration the minimum duration a sequence must have, for j to be considered a candidate. Not Implemented at the moment!
#' @param bitShift  Integer, the number of bits used to shift the duration into sequnceID.
#' @param lengthOfPhenx describes the number of digits that represents a phenx in the sequence.
#' @param lowerBucketThresholds the lower thresholds for the temporal buckets, that are stored when the includeCorBuckets flag is set. 
#' @param includeCorBuckets Boolean, flag to control if the R data frame that is returned should contain columns for for the endPhenx and the buckets set in lowerBucketThresholds 
#' @param removeSparseSequences Boolean parameter to control if the sparsity should be applied.
#' @param sparsityValue The numeric value for the sparsity. DEFAULT = 0.05.
#' @param createTemporalBuckets Boolean flag if the the the sequences should be split up in dynamic buckets. Number of buckets min(4, max_duration(sequence)).
#' @param durationSparsity Boolean flag to control if sparse sequences should be removed considering the duration periods of a sequence.
#' @param durationSparsityValue Numeric value.
#' @param removeSparseTemporalBuckets Boolean, to control if the sparsity should be applied on the dynamic temporal buckets.
#' @param patIdLength Integer, describes the number of digits that are used for the patient number.
#' @param summarize Boolean, if return a summary of the sequences instead of the sequences
getSequencesWithEndPhenx <- function(df_dbMart, bitShift, lengthOfPhenx, lowerBucketThresholds, endPhenx, includeCorBuckets = FALSE, minDuration = 0L, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", numOfThreads = 1L, removeSparseSequences = TRUE, sparsityValue = 0.05, createTemporalBuckets = FALSE, durationSparsity = FALSE, durationSparsityValue = 0, removeSparseTemporalBuckets = FALSE, patIdLength = 7L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L, returnSummary = FALSE, summaryOnPatientLevel = FALSE) {
    .Call(`_tSPMPlus_getSequencesWithEndPhenx`, df_dbMart, bitShift, lengthOfPhenx, lowerBucketThresholds, endPhenx, includeCorBuckets, minDuration, storeSeqDuringCreation, outputDir, outputFilePrefix, numOfThreads, removeSparseSequences, sparsityValue, createTemporalBuckets, durationSparsity, durationSparsityValue, removeSparseTemporalBuckets, patIdLength, returnDuration, durationPeriods, daysForCoOoccurence, returnSummary, summaryOnPatientLevel)
}

getSequencesWithStartPhenx <- function(df_dbMart, bitShift, lengthOfPhenx, lowerBucketThresholds, startPhenx, includeCorBuckets = FALSE, minDuration = 0L, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", numOfThreads = 1L, removeSparseSequences = TRUE, sparsityValue = 0.05, createTemporalBuckets = FALSE, durationSparsity = FALSE, durationSparsityValue = 0, removeSparseTemporalBuckets = FALSE, patIdLength = 7L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L, returnSummary = FALSE, summaryOnPatientLevel = FALSE) {
    .Call(`_tSPMPlus_getSequencesWithStartPhenx`, df_dbMart, bitShift, lengthOfPhenx, lowerBucketThresholds, startPhenx, includeCorBuckets, minDuration, storeSeqDuringCreation, outputDir, outputFilePrefix, numOfThreads, removeSparseSequences, sparsityValue, createTemporalBuckets, durationSparsity, durationSparsityValue, removeSparseTemporalBuckets, patIdLength, returnDuration, durationPeriods, daysForCoOoccurence, returnSummary, summaryOnPatientLevel)
}

#' Get Candidate Sequences For Phenx Of Interest (POI)
#' 
#' Function to extract all sequences that end with phenx j, that is a end phenx for each phenx in startPhenxOfInterest.
#' 
#' @returns The sequences as data frame.
#' @param  df_dbMart The data frame that stores the data mart.
#' @param minDuration the minimum duration at least one sequence from type poi->j must have, for j to be considered a candidate.
#' @param bitShift  Integer, the number of bits used to shift the duration into sequnceID.
#' @param lengthOfPhenx Integer, number of digits used to represent the second phenx in the sequence.
#' @param lowerBucketThresholds IntegerVector, lower duration Thresholds for the duration buckets of the candidate sequences
#' @param startPhenxOfInterest IntegerVector, numeric representation of the POI.
#' @param outputDir The path as string to the directory where the sequences should be stored.
#' @param outputFilePrefix The string file prefix for the patient files storing the sequences.
#' @param numOfThreads The number of threads that should be used during sequencing.
#' @param storeSeqDuringCreation  Boolean parameter to control if the duration should be included in the sequence ID during creation, DEFAULT = FALSE.
#' @param removeSparseSequences  Boolean parameter to control if the sparsity should be applied.
#' @param sparsityValue          The numeric value for the sparsity. DEFAULT = 0.05.
#' @param createTemporalBuckets  Boolean flag if the the the sequences should be split up in dynamic buckets. Number of buckets min(4, max_duration(sequence)).
#' @param removeSparseTemporalBuckets Boolean, to control if the sparsity should be applied on the dynamic temporal buckets.
#' @param durationSparsity  Boolean flag to control if sparse sequences should be removed considering the duration periods of a sequence.
#' @param durationSparsityValue Numeric value.
#' @param patIdLength Integer, describes the number of digits that are used for the patient number.
#' @param returnDuration Boolean, controls if the data frame that is returns contains.
#' @param durationPeriods Numeric, Upper threshold, stores the number of day in the time period, e.g. 30.471 for months, 364.25 for years. 
#' @param daysForCoOoccurence Integer, sets the upper threshold for the sequence duration so that they are counted as co-occurrence (meaning a duration of 0).
getCandidateSequencesForPOI <- function(df_dbMart, minDuration, bitShift, lengthOfPhenx, lowerBucketThresholds, startPhenxOfInterest, storeSeqDuringCreation = FALSE, outputDir = "", outputFilePrefix = "", numOfThreads = 1L, removeSparseSequences = TRUE, sparsityValue = 0.05, createTemporalBuckets = FALSE, durationSparsity = FALSE, durationSparsityValue = 0, removeSparseTemporalBuckets = FALSE, patIdLength = 7L, returnDuration = TRUE, durationPeriods = 30.437, daysForCoOoccurence = 14L) {
    .Call(`_tSPMPlus_getCandidateSequencesForPOI`, df_dbMart, minDuration, bitShift, lengthOfPhenx, lowerBucketThresholds, startPhenxOfInterest, storeSeqDuringCreation, outputDir, outputFilePrefix, numOfThreads, removeSparseSequences, sparsityValue, createTemporalBuckets, durationSparsity, durationSparsityValue, removeSparseTemporalBuckets, patIdLength, returnDuration, durationPeriods, daysForCoOoccurence)
}

#' Get Start Phenx From Sequence
#' 
#' Function to extract the start Phenx from a sequence.
#' 
#' @returns The startPhenx of a sequence
#' @param  sequence  Integer.
#' @param phenxLength Integer, number of digits used to represent the second phenx in the sequence.
getStartPhenxFromSequence <- function(sequence, phenxLength = 7L) {
    .Call(`_tSPMPlus_getStartPhenxFromSequence`, sequence, phenxLength)
}

#' Get End Phenx From Sequence
#' 
#' Function to extract the end Phenx from a sequence.
#' 
#' @returns The endPhenx of a sequence.
#' @param  sequence  Integer.
#' @param phenxLength Integer, number of digits used to represent the second phenx in the sequence.
getEndPhenxFromSequence <- function(sequence, phenxLength = 7L) {
    .Call(`_tSPMPlus_getEndPhenxFromSequence`, sequence, phenxLength)
}

#' Create a sequence from two phenx
#' 
#' Function create a sequence from two phenx.
#' 
#' @returns Integer.
#' @param  firstPhenx  Integer.
#' @param  secondPhenx  Integer.
#' @param phenxLength Integer, number of digits used to represent the second phenx in the sequence.
createSequence <- function(firstPhenx, secondPhenx, phenxLength = 7L) {
    .Call(`_tSPMPlus_createSequence`, firstPhenx, secondPhenx, phenxLength)
}

sequenceAndSummarize <- function(df_dbMart, lowerBucketThreshold, storeSeqDuringCreation = FALSE, includeDurations = FALSE, numOfThreads = 1L, outputDir = "", outputFilePrefix = "", removeSparseSequences = TRUE, sparsityValue = 0.05, createTemporalBuckets = FALSE, durationSparsity = FALSE, durationSparsityValue = 0, removeSparseTemporalBuckets = FALSE, patIdLength = 7L, durationPeriods = 30.437, daysForCoOoccurence = 14L, summaryOnPatientLevel = FALSE) {
    .Call(`_tSPMPlus_sequenceAndSummarize`, df_dbMart, lowerBucketThreshold, storeSeqDuringCreation, includeDurations, numOfThreads, outputDir, outputFilePrefix, removeSparseSequences, sparsityValue, createTemporalBuckets, durationSparsity, durationSparsityValue, removeSparseTemporalBuckets, patIdLength, durationPeriods, daysForCoOoccurence, summaryOnPatientLevel)
}

